<!-- Navbar-->
<app-alert *ngIf="response.message" [response]="response"></app-alert>
<app-header></app-header>
<div class="container mt-5" style="position: relative">
  <div class="row py-4 align-items-center">
    <div class="col-md-5 pr-lg-5 mb-5 mb-md-0">
      <img
        src="https://bootstrapious.com/i/snippets/sn-registeration/illustration.svg"
        alt="SVG Illustration for signup"
        class="img-fluid mb-3 d-none d-md-block"
      />
      <h1>Create an Account</h1>
      <p class="font-italic text-muted mb-0">
        Welcome to <strong>Scissors</strong>. To start enjoying the benefits of
        our service, create an account now and gain access to our powerful tool.
      </p>
    </div>
    <!-- Registeration Form -->
    <div class="col-md-7 col-lg-7 ml-auto">
      <p>Fill in details to sign up...</p>
      <form #signupForm="ngForm" (ngSubmit)="onSubmit()" id="signupForm">
        <div class="row">
          <!-- First Name -->
          <div class="form-floating col-lg-6 mb-3">
            <input
              type="text"
              class="form-control"
              placeholder=" "
              name="firstname"
              required
              [(ngModel)]="user.firstname"
            />
            <label for="fieldName">First Name</label>
          </div>
          <!-- Last Name -->
          <div class="form-floating col-lg-6 mb-3">
            <input
              type="text"
              class="form-control"
              placeholder=" "
              name="lastname"
              required
              [(ngModel)]="user.lastname"
            />
            <label for="fieldName">Last Name</label>
          </div>
          <!-- User Name -->
          <div class="form-floating col-lg-6 mb-3">
            <input
              type="text"
              class="form-control"
              placeholder=" "
              name="username"
              required
              [(ngModel)]="user.username"
            />
            <label for="fieldName">User Name</label>
          </div>
          <!-- Email -->
          <div class="form-floating col-lg-6 mb-3">
            <input
              type="email"
              class="form-control"
              placeholder=" "
              name="email"
              required
              [(ngModel)]="user.email"
            />
            <label for="fieldName">Email Address</label>
          </div>
          <!-- Profile Pic -->
          <div class="col-lg-6 mb-3">
            <label for="profilePic">Profile Picture</label>
            <input
              type="file"
              name="profilePic"
              accept="image/png,image/jpeg"
              [(ngModel)]="user.profilePic"
              class="form-control bg-white border-left-0 border-md"
            />
          </div>
          <!-- Sex -->
          <div class="col-lg-3 mb-3">
            <label for="gender">Gender:</label>
            <select
              class="form-control"
              name="gender"
              id="gender"
              [(ngModel)]="user.sex"
            >
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="others">Rather Not Say</option>
            </select>
          </div>
          <!-- Country -->
          <div class="col-lg-3 mb-3">
            <label for="nationality">Nationality:</label>
            <select
              class="form-control"
              id="nationality"
              name="nationality"
              [(ngModel)]="user.nationality"
            >
              <option
                *ngFor="let country of countries"
                [value]="country.name.common"
              >
                {{ country.name.common }}
              </option>
            </select>
          </div>
          <!-- Password -->
          <div class="form-floating col-lg-6 mb-3">
            <input
              type="password"
              class="form-control"
              placeholder=" "
              name="password"
              required
              [(ngModel)]="user.password"
            />
            <label for="fieldName">Password</label>
          </div>
          <!-- Email -->
          <div class="form-floating col-lg-6 mb-3">
            <input
              type="password"
              class="form-control"
              placeholder=" "
              name="repeat_password"
              required
              [(ngModel)]="user.repeat_password"
            />
            <label for="fieldName">Repeat Password</label>
          </div>
          <!-- Submit Button -->
          <div class="col-lg-12 mb-0">
            <button
              type="submit"
              class="btn btn-block btn-outline-primary py-1 w-100"
              [disabled]="signupForm.invalid || isSubmitting"
            >
              <span *ngIf="!isSubmitting">Create Account</span>
              <span *ngIf="isSubmitting">
                <span
                  class="spinner-border spinner-border-sm me-2"
                  role="status"
                ></span>
                Processing...
              </span>
            </button>
          </div>
          <!-- Divider Text -->
          <div
            class="form-group col-lg-12 mx-auto d-flex align-items-center my-2"
          >
            <div class="border-bottom w-100 ml-5"></div>
            <span class="px-2 small text-muted font-weight-bold text-muted"
              >OR</span
            >
            <div class="border-bottom w-100 mr-5"></div>
          </div>
          <!-- Social Login -->
          <div class="col-lg-12 d-flex justify-content-center mb-3">
            <a
              href="https://scissors-backend.onrender.com/auth/google"
              class="btn btn-danger btn-block py-2"
            >
              <i class="bi bi-google px-2"></i>
              <span class="font-weight-bold px-2">Continue with Google</span>
            </a>
          </div>
          <!-- Already Registered -->
          <div class="text-center w-100">
            <p class="text-muted font-weight-bold">
              Already Registered?
              <a
                (click)="login()"
                class="text-primary ml-2"
                style="cursor: pointer"
                >Login</a
              >
            </p>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
